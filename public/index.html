<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Luminous AI - Your Radiant Beauty Companion</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#B8860B">
    <link rel="manifest" href="manifest.json">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-charcoal: #2C2C2C;
            --luminous-gold: #B8860B;
            --pearl-white: #F8F8F8;
            --radiant-rose: #E8D5D5;
            --premium-gradient: linear-gradient(135deg, #B8860B, #DAA520);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-charcoal);
            color: #333;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 414px;
            margin: 0 auto;
            background: var(--primary-charcoal);
            min-height: 100vh;
            position: relative;
        }

        .header {
            background: var(--primary-charcoal);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #3A3A3A;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            color: white;
            margin-bottom: 8px;
            background: var(--premium-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            font-size: 14px;
            color: var(--luminous-gold);
            font-weight: 500;
            opacity: 0.9;
        }

        .main-content {
            background: var(--pearl-white);
            min-height: calc(100vh - 120px);
            padding: 20px;
        }

        .welcome-section {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
        }

        .welcome-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary-charcoal);
            margin-bottom: 8px;
        }

        .welcome-subtitle {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }

        .ai-search-container {
            margin-bottom: 20px;
        }

        .ai-search-bar {
            background: white;
            border-radius: 25px;
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 2px solid var(--luminous-gold);
        }

        .ai-icon {
            font-size: 20px;
            color: var(--luminous-gold);
        }

        .ai-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 14px;
            color: var(--primary-charcoal);
            background: transparent;
        }

        .ai-input::placeholder {
            color: #999;
            font-style: italic;
        }

        .ai-send-btn {
            background: var(--premium-gradient);
            border: none;
            border-radius: 20px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .ai-send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(184, 134, 11, 0.3);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 24px;
        }

        .action-card {
            background: white;
            border-radius: 12px;
            padding: 8px 6px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.2s;
            cursor: pointer;
            position: relative;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .action-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .premium-feature {
            background: linear-gradient(135deg, #FFF9E6, #FFFFFF);
            border: 1px solid var(--luminous-gold);
        }

        .premium-star {
            position: absolute;
            top: 3px;
            right: 3px;
            font-size: 8px;
            color: var(--luminous-gold);
        }

        .action-icon {
            width: 28px;
            height: 28px;
            border-radius: 14px;
            background: var(--premium-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 4px;
            color: white;
            font-size: 12px;
        }

        .premium-feature .action-icon {
            background: var(--premium-gradient);
            box-shadow: 0 2px 6px rgba(184, 134, 11, 0.3);
        }

        .action-title {
            font-size: 10px;
            font-weight: 600;
            color: var(--primary-charcoal);
            margin-bottom: 2px;
            line-height: 1.1;
        }

        .action-subtitle {
            font-size: 8px;
            color: #666;
            line-height: 1.1;
        }

        .featured-section {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .featured-header {
            background: var(--premium-gradient);
            color: white;
            padding: 16px;
            text-align: center;
        }

        .featured-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .featured-subtitle {
            font-size: 12px;
            opacity: 0.9;
        }

        .featured-content {
            padding: 20px;
            text-align: center;
        }

        .chat-btn {
            background: var(--premium-gradient);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 12px;
            box-shadow: 0 4px 12px rgba(184, 134, 11, 0.3);
            transition: all 0.2s;
        }

        .chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(184, 134, 11, 0.4);
        }

        .features-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }

        .feature-card {
            background: var(--pearl-white);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
        }

        .feature-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .feature-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--primary-charcoal);
            margin-bottom: 4px;
        }

        .feature-desc {
            font-size: 10px;
            color: #666;
        }

        /* Global Products Section Styling */
        .region-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 16px 0;
            justify-content: center;
        }

        .region-filter {
            background: white;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .region-filter:hover {
            background: #f5f5f5;
        }

        .region-filter.active {
            background: var(--premium-gradient);
            color: white;
            border-color: var(--luminous-gold);
        }

        #global-products-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.2s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .product-image {
            height: 100px;
            background-color: #f8f8f8;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .product-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--luminous-gold);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        .product-info {
            padding: 12px;
        }

        .product-title {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--primary-charcoal);
        }

        .product-origin {
            font-size: 10px;
            color: var(--luminous-gold);
            margin-bottom: 4px;
        }

        .product-price {
            font-size: 14px;
            font-weight: 700;
            color: var(--primary-charcoal);
        }

        .product-original-price {
            font-size: 10px;
            color: #999;
            text-decoration: line-through;
            margin-left: 4px;
        }

        .product-card img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-bottom: 1px solid #f5f5f5;
        }

        .product-card-content {
            padding: 12px;
        }

        .product-card h4 {
            font-size: 12px;
            font-weight: 600;
            color: var(--primary-charcoal);
            margin: 0 0 4px 0;
            line-height: 1.3;
        }

        .product-card p {
            font-size: 10px;
            color: #666;
            margin: 0 0 8px 0;
            line-height: 1.3;
            min-height: 30px;
        }

        .add-to-basket-btn {
            background: var(--premium-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 5px 10px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .add-to-basket-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(184, 134, 11, 0.3);
        }

        .bottom-nav {
            background: white;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-around;
            border-top: 1px solid #E0E0E0;
            padding-bottom: 20px;
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: #666;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
        }

        .nav-item.active {
            color: var(--luminous-gold);
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 500;
        }

        .basket-count {
            background: var(--luminous-gold);
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 8px;
            font-weight: 700;
            position: absolute;
            top: -5px;
            right: -5px;
            min-width: 16px;
            text-align: center;
        }

        /* Loading Animation */
        .loading {
            display: inline-flex;
            gap: 2px;
        }

        .dot {
            width: 4px;
            height: 4px;
            background: var(--luminous-gold);
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        .dot:nth-child(2) {
            animation-delay: 0.3s;
        }

        .dot:nth-child(3) {
            animation-delay: 0.6s;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        @media (max-width: 380px) {
            .quick-actions {
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }

            .action-card {
                min-height: 80px;
                padding: 12px 8px;
            }

            .action-title {
                font-size: 11px;
            }

            .action-subtitle {
                font-size: 9px;
            }
        }
    </style>
</head>
<body>
    <script>
        // Check for splash redirect IMMEDIATELY - before any content loads
        const splashShown = sessionStorage.getItem('splashShown');
        if (!splashShown) {
            // Redirect to splash screen immediately
            window.location.href = '/splash.html';
        }
    </script>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">‚ú® Luminous AI</div>
            <div class="tagline">Your Radiant Beauty Companion</div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Welcome Section -->
            <div class="welcome-section">
                <div class="welcome-title">Welcome to Your Beauty Journey</div>
                <div class="welcome-subtitle">Get personalized AI-powered beauty recommendations from global experts</div>

                <!-- AI Search Bar -->
                <div class="ai-search-container">
                    <div class="ai-search-bar">
                        <div class="ai-icon">ü§ñ</div>
                        <input type="text" placeholder="Ask your beauty companion: 'Best anti-aging serum for sensitive skin'" class="ai-input" id="aiInput">
                        <button class="ai-send-btn" onclick="startChat()">
                            <span>‚ú®</span>
                        </button>
                    </div>
                </div>

                <button class="chat-btn" onclick="startChat()">üåü Start Beauty Consultation</button>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="action-card premium-feature" onclick="openFeature('antiaging')">
                    <div class="premium-star">‚≠ê</div>
                    <div class="action-icon">üßò</div>
                    <div class="action-title">Anti-aging</div>
                    <div class="action-subtitle">Wellness & skincare</div>
                </div>
                <div class="action-card" onclick="openFeature('eyecare')">
                    <div class="action-icon">üëÅÔ∏è</div>
                    <div class="action-title">Eye Care</div>
                    <div class="action-subtitle">500+ eye products</div>
                </div>
                <div class="action-card premium-feature" onclick="openFeature('analysis')">
                    <div class="premium-star">‚≠ê</div>
                    <div class="action-icon">‚ú®</div>
                    <div class="action-title">Skin Analysis</div>
                    <div class="action-subtitle">AI recommendations</div>
                </div>
                <div class="action-card premium-feature" onclick="openFeature('facial')">
                    <div class="premium-star">‚≠ê</div>
                    <div class="action-icon">üòä</div>
                    <div class="action-title">Facial Analysis</div>
                    <div class="action-subtitle">AI face scanning</div>
                </div>
                <div class="action-card" onclick="openFeature('kbeauty')">
                    <div class="action-icon">üå∏</div>
                    <div class="action-title">K-Beauty</div>
                    <div class="action-subtitle">600+ Korean products</div>
                </div>
                <div class="action-card" onclick="openFeature('tanning')">
                    <div class="action-icon">‚òÄÔ∏è</div>
                    <div class="action-title">Tanning</div>
                    <div class="action-subtitle">400+ tanning products</div>
                </div>
                <div class="action-card" onclick="openFeature('eyelashes')">
                    <div class="action-icon">üëÅÔ∏è‚Äçüó®Ô∏è</div>
                    <div class="action-title">Eyelashes</div>
                    <div class="action-subtitle">400+ lash products</div>
                </div>
                <div class="action-card" onclick="openFeature('basket')">
                    <div class="action-icon">üõí</div>
                    <div class="action-title">Basket</div>
                    <div class="action-subtitle"><span id="basket-display">0 items</span></div>
                    <div class="basket-count" id="basket-count-badge">0</div>
                </div>
            </div>

            <!-- Featured Section -->
            <div class="featured-section">
                <div class="featured-header" onclick="openFeature('catalog')" style="cursor: pointer;">
                    <div class="featured-title">Beauty Catalog</div>
                    <div class="featured-subtitle">3,100+ Products from Around the World</div>
                </div>
                <div class="featured-content">
                    <div class="feature-card" onclick="openFeature('global')" style="cursor: pointer;">
                        <div class="feature-icon">üåç</div>
                        <div class="feature-title">Global Beauty Products</div>
                        <div class="feature-desc">Discover products from around the world with AI-powered recommendations</div>
                    </div>
                </div>
            </div>

            <!-- Global Products Section -->
            <div class="featured-section">
                <div class="featured-header">
                    <div class="featured-title">Global Beauty Finds</div>
                    <div class="featured-subtitle">Curated products from around the world</div>
                </div>
                <div class="featured-content">
                    <!-- Product Grid -->
                    <div id="global-products-grid">
                        <!-- Products will load here -->
                    </div>
                    
                    <!-- Region Filters -->
                    <div class="region-filters">
                        <button class="region-filter active" data-region="global">All Regions</button>
                        <button class="region-filter" data-region="mexico">Mexico</button>
                        <button class="region-filter" data-region="france">France</button>
                        <button class="region-filter" data-region="germany">Germany</button>
                        <button class="region-filter" data-region="china">China</button>
                        <button class="region-filter" data-region="russia">Russia</button>
                        <button class="region-filter" data-region="south-america">South America</button>
                    </div>
                    
                    <!-- Loading Indicator -->
                    <div id="loading-indicator" style="text-align: center; padding: 10px; display: none;">
                        <div class="loading" style="justify-content: center;">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Spacer for bottom nav -->
            <div style="height: 100px;"></div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="goToPage('home', event)">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" onclick="goToPage('signin', event)">
                <div class="nav-icon">üîë</div>
                <div class="nav-label">Sign In</div>
            </div>
            <div class="nav-item" onclick="goToPage('createaccount', event)">
                <div class="nav-icon">üë§</div>
                <div class="nav-label">Create Account</div>
            </div>
            <div class="nav-item" onclick="goToPage('catalog', event)">
                <div class="nav-icon">üåç</div>
                <div class="nav-label">Catalog</div>
            </div>
            <div class="nav-item" onclick="goToPage('askme', event)">
                <div class="nav-icon">üí¨</div>
                <div class="nav-label">Ask Me</div>
            </div>
        </div>
    </div>

    <script>
        // ======================
        // GLOBAL PRODUCTS SECTION
        // ======================
        const GLOBAL_PRODUCTS = {
            batchSize: 12,
            maxProducts: 200,
            currentRegion: 'global',
            loadedProducts: 0,
            allProducts: []
        };

        // Generate sample products (replace with real data)
        function generateSampleProducts() {
            const regions = ['mexico', 'france', 'germany', 'china', 'russia', 'south-america'];
            const categories = ['Skincare', 'Makeup', 'Haircare', 'Fragrance'];
            
            return Array.from({ length: 200 }, (_, i) => ({
                id: `prod-${i}`,
                name: `${regions[i % regions.length].charAt(0).toUpperCase() + regions[i % regions.length].slice(1)} ${categories[i % categories.length]}`,
                description: `Premium ${categories[i % categories.length].toLowerCase()} from ${regions[i % regions.length]}`,
                price: formatPrice(regions[i % regions.length], i),
                image: getProductImage(regions[i % regions.length]),
                region: regions[i % regions.length]
            }));
        }

        // Helper functions
        function formatPrice(region, index) {
            const prices = {
                mexico: `$${(150 + (index * 5) % 150)} MXN`,
                france: `‚Ç¨${(15 + index % 15)}`,
                germany: `‚Ç¨${(10 + index % 20)}`,
                china: `¬•${(100 + (index * 3) % 200)}`,
                russia: `‚ÇΩ${(500 + (index * 10) % 500)}`,
                'south-america': `R$${(40 + index % 30)}`
            };
            return prices[region];
        }

        function getProductImage(region) {
            const images = {
                mexico: 'https://via.placeholder.com/120x120/ff6b6b/fff?text=MX',
                france: 'https://via.placeholder.com/120x120/74b9ff/fff?text=FR',
                germany: 'https://via.placeholder.com/120x120/00b894/fff?text=DE',
                china: 'https://via.placeholder.com/120x120/e17055/fff?text=CN',
                russia: 'https://via.placeholder.com/120x120/a29bfe/fff?text=RU',
                'south-america': 'https://via.placeholder.com/120x120/fd79a8/fff?text=SA'
            };
            return images[region];
        }

        function showLoading(show) {
            document.getElementById('loading-indicator').style.display = show ? 'block' : 'none';
        }

        // Filter and render products
        function filterAndRenderProducts() {
            const grid = document.getElementById('global-products-grid');
            grid.innerHTML = '';
            GLOBAL_PRODUCTS.loadedProducts = 0;
            
            const filteredProducts = GLOBAL_PRODUCTS.allProducts.filter(product => {
                if (GLOBAL_PRODUCTS.currentRegion === 'global') return true;
                return product.region === GLOBAL_PRODUCTS.currentRegion;
            }).slice(0, GLOBAL_PRODUCTS.maxProducts);
            
            loadMoreProducts(filteredProducts);
            setupLazyLoadObserver(filteredProducts);
        }

        // Load more products
        function loadMoreProducts(products) {
            const grid = document.getElementById('global-products-grid');
            const batch = products.slice(
                GLOBAL_PRODUCTS.loadedProducts,
                GLOBAL_PRODUCTS.loadedProducts + GLOBAL_PRODUCTS.batchSize
            );
            
            batch.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    <img src="${product.image}" loading="lazy">
                    <div class="product-card-content">
                        <h4>${product.name}</h4>
                        <p>${product.description}</p>
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-top:8px;">
                            <span class="product-price">${product.price}</span>
                            <button class="add-to-basket-btn" onclick="addToBasket('${product.id}', '${product.name.replace(/'/g, "\\'")}', ${parseFloat(product.price.replace(/[^\d.]/g, ''))})">
                                Add
                            </button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            GLOBAL_PRODUCTS.loadedProducts += batch.length;
        }

        // Lazy loading
        function setupLazyLoadObserver(products) {
            const observer = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting && 
                    GLOBAL_PRODUCTS.loadedProducts < products.length) {
                    loadMoreProducts(products);
                }
            }, { threshold: 0.1 });

            const sentinel = document.createElement('div');
            sentinel.style.height = '20px';
            document.getElementById('global-products-grid').appendChild(sentinel);
            observer.observe(sentinel);
        }

        // Initialize global products
        function initGlobalProducts() {
            GLOBAL_PRODUCTS.allProducts = generateSampleProducts();
            filterAndRenderProducts();
        }

        // Region filter buttons
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.region-filter').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.region-filter').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    GLOBAL_PRODUCTS.currentRegion = this.dataset.region;
                    filterAndRenderProducts();
                });
            });
            
            // Initialize products
            initGlobalProducts();
        });

        // ======================
        // BASKET FUNCTIONALITY
        // ======================
        function addToBasket(id, name, price) {
            let basket = JSON.parse(localStorage.getItem('basket') || '[]');
            basket.push({ id, name, price });
            localStorage.setItem('basket', JSON.stringify(basket));
            localStorage.setItem('basketCount', basket.length.toString());
            updateBasketDisplay();
            
            // Visual feedback
            event.target.textContent = 'Added!';
            event.target.style.background = '#28a745';
            setTimeout(() => {
                event.target.textContent = 'Add';
                event.target.style.background = '';
            }, 1000);
        }

        function updateBasketDisplay() {
            const basketCount = parseInt(localStorage.getItem('basketCount') || '0');
            document.getElementById('basket-count-badge
