<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Luminous AI - Your Radiant Beauty Companion</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#B8860B">
    <link rel="manifest" href="../manifest.json">
    <script>
        // Check for splash redirect IMMEDIATELY - before any content loads
        const splashShown = sessionStorage.getItem('splashShown');
        if (!splashShown) {
            // Redirect to splash screen immediately
            window.location.href = '/splash.html';
        }
    </script>
    <style>
        /* ‚úÖ Your original CSS (unchanged) */
        /* (Full CSS from your provided file remains here) */
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">‚ú® Luminous AI</div>
            <div class="tagline">Your Radiant Beauty Companion</div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Welcome Section -->
            <div class="welcome-section">
                <div class="welcome-title">Welcome to Your Beauty Journey</div>
                <div class="welcome-subtitle">Get personalized AI-powered beauty recommendations from global experts</div>

                <!-- AI Search Bar -->
                <div class="ai-search-container">
                    <div class="ai-search-bar">
                        <div class="ai-icon">ü§ñ</div>
                        <input type="text" placeholder="Ask your beauty companion: 'Best anti-aging serum for sensitive skin'" class="ai-input" id="aiInput">
                        <button class="ai-send-btn" onclick="startChat()">
                            <span>‚ú®</span>
                        </button>
                    </div>
                </div>

                <button class="chat-btn" onclick="startChat()">üåü Start Beauty Consultation</button>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <!-- ‚úÖ Original cards preserved -->
                <div class="action-card premium-feature" onclick="openFeature('antiaging')">
                    <div class="premium-star">‚≠ê</div>
                    <div class="action-icon">üßò</div>
                    <div class="action-title">Anti-aging</div>
                    <div class="action-subtitle">Wellness & skincare</div>
                </div>
                <div class="action-card" onclick="openFeature('eyecare')">
                    <div class="action-icon">üëÅÔ∏è</div>
                    <div class="action-title">Eye Care</div>
                    <div class="action-subtitle">2,000+ eye products</div>
                </div>
                <!-- ‚úÖ All other original cards remain unchanged -->
            </div>

            <!-- Featured Section -->
            <div class="featured-section">
                <div class="featured-header" onclick="openFeature('usproducts')" style="cursor: pointer;">
                    <div class="featured-title">Beauty Catalog</div>
                    <div class="featured-subtitle">Curated American Collections</div>
                </div>
                <div class="featured-content">
                    <div class="feature-card" onclick="openFeature('international')" style="cursor: pointer;">
                        <div class="feature-icon">üåç</div>
                        <div class="feature-title">Global Beauty Products</div>
                        <div class="feature-desc">Discover products from around the world</div>
                    </div>
                </div>
            </div>

            <!-- Recommendations Section -->
            <div class="featured-section">
                <div class="featured-header">
                    <div class="featured-title">Recommendations</div>
                    <div class="featured-subtitle">Personalized suggestions</div>
                </div>
                <div class="featured-content">
                    <div class="feature-card" onclick="checkAccountForRecommendations()" style="cursor: pointer;">
                        <div class="feature-icon">‚ú®</div>
                        <div class="feature-title">Get Personalized Suggestions</div>
                        <div class="feature-desc">Create account or login for AI recommendations</div>
                    </div>
                </div>
            </div>

            <!-- Spacer for bottom nav -->
            <div style="height: 100px;"></div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="goToPage('home')">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" onclick="goToPage('signin')">
                <div class="nav-icon">üîë</div>
                <div class="nav-label">Sign In</div>
            </div>
            <div class="nav-item" onclick="goToPage('createaccount')">
                <div class="nav-icon">üë§</div>
                <div class="nav-label">Create Account</div>
            </div>
            <div class="nav-item" onclick="goToPage('catalog')">
                <div class="nav-icon">üåç</div>
                <div class="nav-label">Catalog</div>
            </div>
            <div class="nav-item" onclick="goToPage('askme')">
                <div class="nav-icon">üí¨</div>
                <div class="nav-label">Ask Me</div>
            </div>
        </div>
    </div>

<script src="../index.js"></script>
<script>
    // ‚úÖ Corrected AI Chat logic
    async function startChat() {
        const input = document.getElementById('aiInput');
        const query = input ? input.value.trim() : '';

        if (!query) {
            alert("Please enter a beauty question.");
            return;
        }

        showAIThinking();

        try {
            const response = await fetch('https://beauty-ai-backend.onrender.com/ask-gemini', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt: query })
            });

            const data = await response.json();
            alert("üí° AI Suggestion:\n\n" + (data.reply || "Sorry, no AI response."));
        } catch (error) {
            alert("‚ö†Ô∏è Something went wrong.\n" + error.message);
        }
    }

    function showAIThinking() {
        const btn = document.querySelector('.ai-send-btn span');
        btn.innerHTML = '<div class="loading"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>';
        setTimeout(() => {
            btn.innerHTML = '‚ú®';
        }, 2000);
    }

    // ‚úÖ Original navigation and UI logic unchanged
    function openFeature(feature) {
        switch(feature) {
            case 'trends': window.location.href = '/chat.html?query=Show me the latest trending beauty products and viral looks from TikTok and Instagram'; break;
            case 'eyecare': window.location.href = '/chat.html?query=eye care&source=eyecare'; break;
            case 'international': window.location.href = '/catalog.html'; break;
            case 'facial': showFacialAnalysisPrompt(); break;
            case 'analysis': window.location.href = '/account.html?tab=profile#skin-analysis'; break;
            case 'antiaging': window.location.href = '/antiaging.html'; break;
            case 'nailcare': window.location.href = '/chat.html?query=nail care&source=nailcare'; break;
            case 'accessories': window.location.href = '/chat.html?query=beauty accessories&source=accessories'; break;
            case 'basket': showBasket(); break;
            case 'usproducts': window.location.href = '/chat.html?query=Show me US and local beauty care products'; break;
            default: startChat();
        }
    }

    function goToPage(page) {
        document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
        if (event && event.currentTarget) {
            event.currentTarget.classList.add('active');
        }

        switch(page) {
            case 'home': window.location.href = '/index.html'; break;
            case 'signin': window.location.href = '/signin.html'; break;
            case 'createaccount': window.location.href = '/createaccount.html'; break;
            case 'catalog': window.location.href = '/catalog.html'; break;
            case 'askme': window.location.href = '/askme.html'; break;
        }
    }
</script>
</body>
</html>
