<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Beauty Chat - Luminous AI</title>
<meta name="theme-color" content="#B8860B"/>
<style>
body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; background:#2C2C2C; color:white; margin:0; }
.container { max-width:414px; margin:0 auto; display:flex; flex-direction:column; height:100vh; }
.header { padding:15px; text-align:center; background:#2C2C2C; font-size:20px; font-weight:bold; position:relative; }
.logo { background:linear-gradient(135deg,#B8860B,#DAA520); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.return-btn { position:absolute; left:15px; top:18px; background:#DAA520; color:white; border:none; border-radius:20px; padding:6px 12px; cursor:pointer; }
.cart-counter { position:absolute; right:15px; top:18px; background:#DAA520; color:white; border-radius:50%; width:28px; height:28px; display:flex; align-items:center; justify-content:center; font-size:14px; }
.chat-area { flex:1; overflow-y:auto; padding:15px; background:#F8F8F8; color:#333; }
.message { margin-bottom:10px; }
.message.user { text-align:right; }
.message-content { display:inline-block; padding:10px 14px; border-radius:14px; background:#f0f0f0; color:#333; max-width:80%; }
.message.user .message-content { background:linear-gradient(135deg,#B8860B,#DAA520); color:white; }
.product-card { background:white; border-radius:12px; padding:12px; margin:10px 0; box-shadow:0 2px 6px rgba(0,0,0,.1); }
.product-name { font-weight:bold; margin-bottom:6px; }
.product-price { color:#B8860B; font-weight:bold; margin-bottom:6px; }
.add-to-cart { background:#DAA520; color:white; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; margin-top:8px; font-size:14px; display:block; width:100%; text-align:center; }
.input-area { background:#2C2C2C; padding:12px; display:flex; gap:10px; }
.message-input { flex:1; padding:10px; border-radius:20px; border:none; outline:none; font-size:14px; }
.send-btn { background:linear-gradient(135deg,#B8860B,#DAA520); color:white; border:none; border-radius:50%; width:40px; height:40px; cursor:pointer; }
.show-more { display:block; text-align:center; margin:15px auto; padding:10px 15px; background:#DAA520; color:white; border-radius:8px; cursor:pointer; }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <button class="return-btn" onclick="window.location.href='index.html'">← Home</button>
        <span class="logo">✨ Beauty Chat</span>
        <div class="cart-counter" id="cartCount">0</div>
    </div>

    <div class="chat-area" id="chatArea"></div>

    <div class="input-area">
        <input class="message-input" id="messageInput" placeholder="Ask about beauty products..." onkeypress="handleKeyPress(event)">
        <button class="send-btn" onclick="sendMessage()">▶</button>
    </div>
</div>

<script>
let lastProducts = [];
let showingCount = 0;
const BATCH_SIZE = 25; // Load 25 at a time

function showProducts(products) {
    lastProducts = products;
    showingCount = 0;
    document.getElementById('chatArea').innerHTML = '';
    showNextProducts();
}

function showNextProducts() {
    const msgBox = document.getElementById('chatArea');
    const nextProducts = lastProducts.slice(showingCount, showingCount + BATCH_SIZE);
    showingCount += nextProducts.length;

    nextProducts.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
            <div class="product-name">${p.name}</div>
            <div class="product-price">${p.price || '$?'}</div>
            <div>${p.description || ''}</div>
        `;
        msgBox.appendChild(card);
    });

    // Add Show More button if there are more products
    if (showingCount < lastProducts.length) {
        const btn = document.createElement('button');
        btn.textContent = 'Show More';
        btn.style = "margin:10px auto;display:block;padding:10px 20px;background:var(--premium-gradient);color:white;border:none;border-radius:8px;font-size:14px;cursor:pointer;";
        btn.onclick = () => {
            btn.remove();
            showNextProducts();
        };
        msgBox.appendChild(btn);
    } else {
        const homeBtn = document.createElement('button');
        homeBtn.textContent = 'Return Home';
        homeBtn.style = "margin:10px auto;display:block;padding:10px 20px;background:#444;color:white;border:none;border-radius:8px;font-size:14px;cursor:pointer;";
        homeBtn.onclick = () => window.location.href = 'index.html';
        msgBox.appendChild(homeBtn);
    }
}
</script>

</body>
</html>
